(window.webpackJsonp=window.webpackJsonp||[]).push([["login"],{3072:function(e,t,s){},6515:function(e,t,s){"use strict";var a=s("8161");s.n(a).a},8161:function(e,t,s){},"8c08":function(e,t,s){},9231:function(e,t,s){"use strict";var a=s("3072");s.n(a).a},ac2a:function(e,t,s){"use strict";s.r(t);var a,o,n=s("ce3c"),r=(s("e411"),s("f030")),i=(s("cc66"),s("2767")),c=(s("3a23"),s("04a0"),s("332b")),d=(s("6a61"),s("cf7f")),l=(s("5880"),s("b06f"),{name:"VerifyCodeBtn",components:Object(n.a)({},r.a.name,r.a),props:{btnMsg:{type:String,default:"发送验证码"},restTime:{type:Number,default:30}},data:function(){return{codeRestTime:0}},methods:{btnClick:function(){var e=this;this.codeRestTime=this.restTime;var t=setInterval(function(){--e.codeRestTime,e.codeRestTime||(clearInterval(t),t=null)},1e3);this.$emit("sendVerifyCode")}}}),u=(s("6515"),s("9ca4")),p=Object(u.a)(l,function(){var e=this,t=e.$createElement;return(e._self._c||t)("van-button",{staticClass:"check-btn",attrs:{size:"mini",type:"default",color:"#44B47C",disabled:!!e.codeRestTime},on:{click:e.btnClick}},[e._v("\n  "+e._s(e.codeRestTime?e.codeRestTime+"S":"发送验证码")+"\n")])},[],!1,null,"b8c864a6",null).exports,f=s("c24f"),b=s("5f87"),m={name:"Login",data:function(){return{logo:s("cf05"),mobile:"13488889999",password:"12345678",code:"",loginWay:"password",passwordType:"password",mobileError:""}},mounted:function(){},methods:{sendVerifyCode:function(){this.mobileError="",this.mobile||(this.mobileError="手机号码必填")},switchPasswordType:function(){this.passwordType="password"===this.passwordType?"text":"password"},switchLoginWay:function(){this.password=this.code="",this.loginWay="password"===this.loginWay?"verifyCode":"password"},handleLogin:(o=Object(d.a)(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={mobile:this.mobile,password:this.password,platformType:"b2c",clientType:"WXH5"},e.next=3,Object(f.b)(t);case 3:0===(s=e.sent).code&&(this.$toast.success("登录成功"),Object(b.c)(s.data.token),this.$store.dispatch("setToken",s.data.token),this.$router.push("/"));case 5:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)})},computed:{loginWayObj:function(){return"password"===this.loginWay?{icon:"closed-eye",toggleMsg:"验证码登录"}:{icon:"eye",toggleMsg:"密码登录"}},passwordIcon:function(){return"password"===this.passwordType?"closed-eye":"eye"}},components:(a={},Object(n.a)(a,c.a.name,c.a),Object(n.a)(a,i.a.name,i.a),Object(n.a)(a,r.a.name,r.a),Object(n.a)(a,"VerifyCodeBtn",p),a)},h=(s("9231"),s("d03e"),Object(u.a)(m,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg"},[s("div",{staticClass:"header"},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:t.logo,alt:"default_logo"}})])]),t._v(" "),s("div",{staticClass:"content"},[s("van-field",{attrs:{placeholder:"请输入手机号","error-message":t.mobileError},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),"password"===t.loginWay?s("van-field",{attrs:{placeholder:"登录密码",type:t.passwordType},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[s("van-icon",{attrs:{slot:"right-icon",name:t.passwordIcon},on:{click:t.switchPasswordType},slot:"right-icon"})],1):s("van-field",{attrs:{placeholder:"请输入验证码",type:"text"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[s("VerifyCodeBtn",{attrs:{slot:"button"},on:{sendVerifyCode:t.sendVerifyCode},slot:"button"})],1),t._v(" "),s("div",{staticClass:"button-wrap"},[s("div",{staticClass:"login-btn",on:{click:t.handleLogin}},[t._v("登录")])]),t._v(" "),s("div",{staticClass:"more-wrap"},[s("div",{staticClass:"switch-way",on:{click:t.switchLoginWay}},[t._v(t._s(t.loginWayObj.toggleMsg))])])],1)])},[],!1,null,"df5b9be6",null));t.default=h.exports},b775:function(e,t,s){"use strict";s("aa8d");var a=s("b89e"),o=s("cebe"),n=s.n(o),r=s("653a"),i=(s("a18c"),s("5f87")),c=n.a.create({baseURL:"",timeout:5e3});c.interceptors.request.use(function(e){return e.headers["TENANT-ID"]="1",Object(i.a)()&&(e.headers.Auth="Bearer "+Object(i.a)()),e},function(e){return Promise.reject(e)}),c.interceptors.response.use(function(e){var t=e.data;return 0!==t.code?Promise.reject(new Error(t.msg||"Error")):t},function(e){switch(e.response.status){case 401:a.a.fail({message:e.response.data.msg,duration:1500}),Object(i.b)(),r.a.dispatch("setToken","").then(function(){location.reload()});break;case 404:a.a.fail("网络请求不存在");case 403:a.a.fail(e.response.data.msg);break;default:a.a.fail(e.response.data.msg)}return Promise.reject(e)}),t.a=c},c24f:function(e,t,s){"use strict";s.d(t,"b",function(){return o}),s.d(t,"a",function(){return n});var a=s("b775");function o(e){return Object(a.a)({url:"/mbr/rest/front/mbrMchClerk/login",method:"post",data:e})}function n(e){return Object(a.a)({url:"/mbr/rest/front/mbrMchClerk/getWxAuthConfig",method:"post",data:e})}},d03e:function(e,t,s){"use strict";var a=s("8c08");s.n(a).a}}]);